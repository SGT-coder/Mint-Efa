"use client"

import { useState, useEffect } from "react"

const translations: { [key: string]: { [key: string]: string } } = {
  en: {
    login_title: "Login to MInT CRM",
    email_label: "Email",
    password_label: "Password",
    login_button: "Login",
    forgot_password: "Forgot password?",
    no_account: "Don't have an account?",
    signup_link: "Sign up",
    language_select: "Select Language",
    signup_title: "Create an Account",
    confirm_password_label: "Confirm Password",
    signup_button: "Sign Up",
    already_have_account: "Already have an account?",
    login_link: "Login",
    portal_welcome: "Welcome to the Customer Portal",
    portal_description: "Your hub for support, resources, and information.",
    customer_signup: "Customer Signup",
    faqs: "FAQs",
    public_downloads: "Public Downloads",
    office_locator: "Office Locator",
    get_started: "Get Started",
    faq_title: "Frequently Asked Questions",
    faq_q1: "What is MInT CRM?",
    faq_a1:
      "MInT CRM is a comprehensive Customer Relationship Management system designed to streamline your interactions with customers, manage cases, tasks, and communications efficiently.",
    faq_q2: "How do I register for an account?",
    faq_a2:
      "You can register for an account by clicking on the 'Customer Signup' link on the portal home page and filling out the registration form.",
    faq_q3: "Where can I find public documents?",
    faq_a3: "Public documents and resources are available under the 'Public Downloads' section of the portal.",
    downloads_title: "Public Downloadable Resources",
    downloads_description: "Access useful documents, guides, and resources.",
    download_guide: "User Guide",
    download_brochure: "Product Brochure",
    download_policy: "Privacy Policy",
    office_locator_title: "Our Office Locations",
    office_locator_description: "Find our offices and navigate your way.",
    main_office: "Main Office",
    building_name: "Building Name",
    floor_number: "Floor Number",
    seat_location: "Seat Location",
    submit_request: "Submit a Request, Feedback, or Enquiry",
    request_type: "Type of Request",
    request_subject: "Subject",
    request_message: "Your Message",
    submit_button: "Submit",
    profile_title: "My Profile",
    profile_details: "Profile Details",
    case_followup: "Case Follow-up",
    saved_searches: "Saved Searches",
    my_files: "My Files",
    edit_profile: "Edit Profile",
    name_label: "Name",
    phone_label: "Phone",
    address_label: "Address",
    update_profile: "Update Profile",
    case_id: "Case ID",
    status: "Status",
    last_updated: "Last Updated",
    view_details: "View Details",
    search_name: "Search Name",
    criteria: "Criteria",
    created_at: "Created At",
    file_name: "File Name",
    file_type: "File Type",
    upload_date: "Upload Date",
    download: "Download",
    upload_file: "Upload File",
    terms_of_service: "Terms of Service",
    privacy_policy: "Privacy Policy",
  },
  am: {
    login_title: "ወደ MInT CRM ይግቡ",
    email_label: "ኢሜል",
    password_label: "የይለፍ ቃል",
    login_button: "ግባ",
    forgot_password: "የይለፍ ቃል ረሱ?",
    no_account: "መለያ የለዎትም?",
    signup_link: "ይመዝገቡ",
    language_select: "ቋንቋ ይምረጡ",
    signup_title: "መለያ ይፍጠሩ",
    confirm_password_label: "የይለፍ ቃል ያረጋግጡ",
    signup_button: "ይመዝገቡ",
    already_have_account: "ቀደም ሲል መለያ አለዎት?",
    login_link: "ግባ",
    portal_welcome: "ወደ ደንበኛ ፖርታል እንኳን ደህና መጡ",
    portal_description: "ለድጋፍ፣ ለመረጃ እና ለግብዓቶች ማዕከልዎ።",
    customer_signup: "የደንበኛ ምዝገባ",
    faqs: "ተደጋጋሚ ጥያቄዎች",
    public_downloads: "የህዝብ ማውረዶች",
    office_locator: "የቢሮ መገኛ",
    get_started: "ይጀምሩ",
    faq_title: "ተደጋጋሚ የሚጠየቁ ጥያቄዎች",
    faq_q1: "MInT CRM ምንድን ነው?",
    faq_a1:
      "MInT CRM ከደንበኞችዎ ጋር ያለዎትን ግንኙነት ለማቀላጠፍ፣ ጉዳዮችን፣ ተግባራትን እና ግንኙነቶችን በብቃት ለማስተዳደር የተነደፈ አጠቃላይ የደንበኛ ግንኙነት አስተዳደር ስርዓት ነው።",
    faq_q2: "መለያ እንዴት መመዝገብ እችላለሁ?",
    faq_a2: "በፖርታል መነሻ ገጽ ላይ ያለውን 'የደንበኛ ምዝገባ' ማገናኛን ጠቅ በማድረግ እና የምዝገባ ቅጹን በመሙላት መለያ መመዝገብ ይችላሉ።",
    faq_q3: "የህዝብ ሰነዶችን የት ማግኘት እችላለሁ?",
    faq_a3: "የህዝብ ሰነዶች እና ግብዓቶች በፖርታሉ 'የህዝብ ማውረዶች' ክፍል ስር ይገኛሉ።",
    downloads_title: "የህዝብ ማውረድ የሚችሉ ግብዓቶች",
    downloads_description: "ጠቃሚ ሰነዶችን፣ መመሪያዎችን እና ግብዓቶችን ያግኙ።",
    download_guide: "የተጠቃሚ መመሪያ",
    download_brochure: "የምርት ብሮሹር",
    download_policy: "የግላዊነት ፖሊሲ",
    office_locator_title: "የቢሮዎቻችን መገኛ",
    office_locator_description: "ቢሮዎቻችንን ያግኙ እና መንገድዎን ይፈልጉ።",
    main_office: "ዋና ቢሮ",
    building_name: "የህንፃ ስም",
    floor_number: "የወለል ቁጥር",
    seat_location: "የመቀመጫ ቦታ",
    submit_request: "ጥያቄ፣ አስተያየት ወይም ጥያቄ ያስገቡ",
    request_type: "የጥያቄ አይነት",
    request_subject: "ርዕስ",
    request_message: "መልዕክትዎ",
    submit_button: "አስገባ",
    profile_title: "የእኔ መገለጫ",
    profile_details: "የመገለጫ ዝርዝሮች",
    case_followup: "የጉዳይ ክትትል",
    saved_searches: "የተቀመጡ ፍለጋዎች",
    my_files: "የእኔ ፋይሎች",
    edit_profile: "መገለጫ አርትዕ",
    name_label: "ስም",
    phone_label: "ስልክ",
    address_label: "አድራሻ",
    update_profile: "መገለጫ አዘምን",
    case_id: "የጉዳይ መለያ",
    status: "ሁኔታ",
    last_updated: "ለመጨረሻ ጊዜ የዘመነው",
    view_details: "ዝርዝሮችን ይመልከቱ",
    search_name: "የፍለጋ ስም",
    criteria: "መስፈርት",
    created_at: "የተፈጠረበት ቀን",
    file_name: "የፋይል ስም",
    file_type: "የፋይል አይነት",
    upload_date: "የሰቀላ ቀን",
    download: "አውርድ",
    upload_file: "ፋይል ስቀል",
    terms_of_service: "የአገልግሎት ውሎች",
    privacy_policy: "የግላዊነት ፖሊሲ",
  },
  om: {
    login_title: "Gara MInT CRM Seeni",
    email_label: "Imeelii",
    password_label: "Jecha Darbii",
    login_button: "Seeni",
    forgot_password: "Jecha darbii dagatte?",
    no_account: "Akkaawuntii hin qabduu?",
    signup_link: "Galmaa'i",
    language_select: "Afaan Filadhu",
    signup_title: "Akkaawuntii Uumi",
    confirm_password_label: "Jecha Darbii Mirkaneessi",
    signup_button: "Galmaa'i",
    already_have_account: "Akkaawuntii duraan qabduu?",
    login_link: "Seeni",
    portal_welcome: "Gara Portalii Maamilaa Nagaan Dhuftan",
    portal_description: "Iddoo deeggarsaa, qabeenyaa fi odeeffannoo keessan.",
    customer_signup: "Galmee Maamilaa",
    faqs: "Gaaffilee Yeroo Baay'ee Gaafataman",
    public_downloads: "Waraqaa Ummataa Buufamuu Danda'an",
    office_locator: "Bakka Waajjiraa",
    get_started: "Jalqaabi",
    faq_title: "Gaaffilee Yeroo Baay'ee Gaafataman",
    faq_q1: "MInT CRM maalidha?",
    faq_a1:
      "MInT CRM sirna bulchiinsa hariiroo maamilaa bal'aa kan maamilaa waliin walqunnamtii keessan salphisuuf, dhimmoota, hojii fi qunnamtii haala qulqulluun bulchuuf qophaa'edha.",
    faq_q2: "Akkaawuntii akkamitti galmeessuu danda'a?",
    faq_a2:
      "Akkaawuntii galmeessuuf, fuula jalqabaa portalii irratti linkii 'Galmee Maamilaa' jedhu cuqaasuun fi foomii galmee guutuun dandeessa.",
    faq_q3: "Waraqaa ummataa eessatti argachuu danda'a?",
    faq_a3: "Waraqaa ummataa fi qabeenyi 'Waraqaa Ummataa Buufamuu Danda'an' jedhu jalatti argamu.",
    downloads_title: "Qabeenya Ummataa Buufamuu Danda'an",
    downloads_description: "Waraqaa, qajeelfama fi qabeenya barbaachisaa argadhu.",
    download_guide: "Qajeelfama Fayyadamaa",
    download_brochure: "Barruulee Oomishaa",
    download_policy: "Imaammata Dhuunfaa",
    office_locator_title: "Bakka Waajjiraalee Keenyaa",
    office_locator_description: "Waajjiraalee keenya argadhu fi karaa kee qajeelchi.",
    main_office: "Waajjira Guddaa",
    building_name: "Maqaa Gamoo",
    floor_number: "Lakkoofsa Olka'iinsaa",
    seat_location: "Bakka Teessoo",
    submit_request: "Gaaffii, Yaada yookiin Qorannoo Dhiyeessi",
    request_type: "Gosa Gaaffii",
    request_subject: "Mata Duree",
    request_message: "Ergaa Kee",
    submit_button: "Dhiyeessi",
    profile_title: "Profaayilii Koo",
    profile_details: "Bal'ina Profaayilii",
    case_followup: "Hordoffii Dhimmaa",
    saved_searches: "Barbaadota Quqqaabaman",
    my_files: "Faayiloota Koo",
    edit_profile: "Profaayilii Fooyyessi",
    name_label: "Maqaa",
    phone_label: "Bilbila",
    address_label: "Teessoo",
    update_profile: "Profaayilii Haareessi",
    case_id: "ID Dhimmaa",
    status: "Haala",
    last_updated: "Yeroo Dhumaa Haareffame",
    view_details: "Bal'ina Ilaali",
    search_name: "Maqaa Barbaadi",
    criteria: "Ulaagaa",
    created_at: "Yeroo Uumame",
    file_name: "Maqaa Faayilii",
    file_type: "Gosa Faayilii",
    upload_date: "Guyyaa Buufame",
    download: "Buufadhu",
    upload_file: "Faayilii Buufadhu",
    terms_of_service: "Haalawwan Tajaajilaa",
    privacy_policy: "Imaammata Dhuunfaa",
  },
}

export function useTranslation(defaultLang = "en") {
  const [lang, setLang] = useState(defaultLang)
  const [t, setT] = useState(() => (key: string) => translations[lang]?.[key] || key)

  useEffect(() => {
    // This effect runs only once on mount to check for initial language from localStorage or navigator
    const storedLang = localStorage.getItem("selectedLanguage")
    const browserLang = navigator.language.split("-")[0]
    const initialLang = storedLang || (["am", "om"].includes(browserLang) ? browserLang : defaultLang)
    setLang(initialLang)
  }, [defaultLang])

  useEffect(() => {
    setT(() => (key: string) => translations[lang]?.[key] || key)
    localStorage.setItem("selectedLanguage", lang)
  }, [lang])

  const changeLanguage = (newLang: string) => {
    if (translations[newLang]) {
      setLang(newLang)
    } else {
      console.warn(`Language '${newLang}' not supported. Falling back to '${defaultLang}'.`)
      setLang(defaultLang)
    }
  }

  return { t, lang, changeLanguage }
}
